---
import { Image } from 'astro:assets';
import { siteConfig } from '../config.ts';
import { Icon } from 'astro-icon/components';
import * as LucideIcons from '@lucide/astro';

const iconMap = {
  twitter: 'simple-icons:x',
  github: 'simple-icons:github',
  dribbble: 'simple-icons:dribbble',
  linkedin: 'simple-icons:linkedin',
  facebook: 'simple-icons:facebook',
  instagram: 'simple-icons:instagram',
};
---

<footer class="bg-[var(--color-bg-footer)] text-white" aria-label="Site Footer">
  <div class="mx-auto max-w-7xl px-12 py-16">
    <div class="mb-12 grid grid-cols-1 gap-12 md:grid-cols-4 items-start">
      {
        siteConfig.footer.columns.map((column) => {
          const sectionLabel = column.title
            ? `Office in ${column.title}`
            : column.logo
              ? 'Living IT information and social media links'
              : column.social
                ? 'Social media links'
                : column.address
                  ? 'Kontorsadress'
                  : null;

          return (
            <div>
              {sectionLabel && <h2 class="sr-only">{sectionLabel}</h2>}
              {column.title && <h3 class="mb-4 font-semibold">{column.title}</h3>}
            {column.address && (
              <a href={column.mapsUrl} target="_blank" rel="noopener noreferrer" class="text-mono-light mb-4 whitespace-pre-line text-sm leading-relaxed hover:text-white transition-colors block">
                {column.address}
              </a>
            )}
            {column.logo && (
              <div class="mb-4">
                <Image src={column.logo} alt="Living IT Logo" width={120} height={48} class="h-12 -mt-4" />
                {column.legalInfo && (
                  <div class="mt-6 text-mono-light whitespace-pre-line text-sm leading-relaxed">
                    {column.legalInfo}
                  </div>
                )}
              </div>
            )}
            {column.social && (
              <div class="flex space-x-4">
                {column.social.map((social) => (
                  social.isCookieButton ? (
                    <a 
                      href="/cookies-policy"
                      class="text-mono-light hover:text-white transition-colors tooltip-above"
                      aria-label={social.name}
                      data-tooltip={social.name}
                    >
                      <LucideIcons.Cookie class="h-6 w-6" />
                    </a>
                  ) : (
                    <a
                      href={social.href}
                      class="text-mono-light hover:text-white transition-colors tooltip-above"
                      aria-label={social.name}
                      data-tooltip={social.name}
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Icon name={iconMap[social.icon]} class="h-6 w-6" />
                    </a>
                  )
                ))}
              </div>
            )}
            </div>
          );
        })
      }
    </div>

    <div
      class="border-mono-darker border-t pt-8"
    ></div>
  </div>
</footer>

{/* Cookie button script - DISABLED: Button now links directly to /cookies-policy
<script>
  // Handle restore cookie consent button
  const restoreButton = document.getElementById('restore-cookie-consent');
  
  restoreButton?.addEventListener('click', () => {
    // Remove the consent from localStorage
    localStorage.removeItem('cookie-consent-accepted');
    
    // Show the cookie banner
    const cookieBanner = document.getElementById('cookie-banner');
    cookieBanner?.classList.remove('hidden');
  });
</script>
*/}
